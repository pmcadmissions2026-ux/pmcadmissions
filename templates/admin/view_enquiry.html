<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Enquiry - PMC Admission</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body class="bg-gray-50">
    <div class="max-w-6xl mx-auto p-8">
        <a href="{{ url_for('admin.enquiries') }}" class="text-indigo-600 hover:text-indigo-900 mb-4 inline-block flex items-center gap-1">
            <span class="material-symbols-outlined">arrow_back</span> Back to Enquiries
        </a>
        
        <div class="bg-white rounded-lg shadow">
            <!-- Header -->
            <div class="bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6 rounded-t-lg">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="text-3xl font-bold">{{ enquiry.student_name }}</h2>
                        <p class="text-indigo-100 mt-1">Enquiry ID: {{ enquiry.id }}</p>
                    </div>
                    <span class="px-4 py-2 inline-flex text-sm font-semibold rounded-full 
                        {% if enquiry.status == 'converted' %}bg-green-100 text-green-800
                        {% elif enquiry.status == 'in_progress' %}bg-yellow-100 text-yellow-800
                        {% else %}bg-blue-100 text-blue-800{% endif %}">
                        {{ enquiry.status|replace('_', ' ')|title }}
                    </span>
                </div>
            </div>

            <div class="p-6">
                <!-- Personal Information -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Personal Information</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Full Name</label>
                            <p class="text-gray-900 text-lg">{{ student.full_name or enquiry.student_name or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Unique ID</label>
                            <p class="text-gray-900 text-lg font-mono">{{ student.unique_id or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">+2 Register Number</label>
                            <p class="text-gray-900 text-lg">{{ student.plus2_register_number or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Date of Birth</label>
                            <p class="text-gray-900 text-lg">{{ student.date_of_birth or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Gender</label>
                            <p class="text-gray-900 text-lg">{{ student.gender or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Aadhar Number</label>
                            <p class="text-gray-900 text-lg">{{ student.aadhar_number or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- Contact Information -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Contact Information</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">WhatsApp Number</label>
                            <p class="text-gray-900 text-lg">{{ student.whatsapp_number or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Email</label>
                            <p class="text-gray-900 text-lg break-all">{{ student.email or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Mother Tongue</label>
                            <p class="text-gray-900 text-lg">{{ student.mother_tongue or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- Address Information -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Address Information</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Permanent Address</label>
                            <p class="text-gray-900 text-lg">{{ student.permanent_address or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">City</label>
                            <p class="text-gray-900 text-lg">{{ student.city or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">State</label>
                            <p class="text-gray-900 text-lg">{{ student.state or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Pincode</label>
                            <p class="text-gray-900 text-lg">{{ student.pincode or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- Parent Information -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Parent Information</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Father's Name</label>
                            <p class="text-gray-900 text-lg">{{ student.father_name or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Father's Phone</label>
                            <p class="text-gray-900 text-lg">{{ student.father_phone or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Mother's Name</label>
                            <p class="text-gray-900 text-lg">{{ student.mother_name or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Mother's Phone</label>
                            <p class="text-gray-900 text-lg">{{ student.mother_phone or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- 10th Standard Details -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">10th Standard Details</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">School Name</label>
                            <p class="text-gray-900 text-lg">{{ student.tenth_school_name or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Marks</label>
                            <p class="text-gray-900 text-lg">{{ student.tenth_marks or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Percentage</label>
                            <p class="text-gray-900 text-lg">{{ student.tenth_percentage or 'N/A' }}%</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Year of Passing</label>
                            <p class="text-gray-900 text-lg">{{ student.tenth_year or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- +2 Standard Details -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">+2 Standard Details</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">School Name</label>
                            <p class="text-gray-900 text-lg">{{ student.plus2_school_name or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Marks</label>
                            <p class="text-gray-900 text-lg">{{ student.plus2_marks or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Percentage</label>
                            <p class="text-gray-900 text-lg">{{ student.plus2_percentage or 'N/A' }}%</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Year of Passing</label>
                            <p class="text-gray-900 text-lg">{{ student.plus2_year or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Board</label>
                            <p class="text-gray-900 text-lg">{{ student.board or 'N/A' }}</p>
                        </div>
                    </div>
                </section>

                <!-- Academic Details -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Academic Details</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-4">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">State</label>
                            <p class="text-gray-900 text-lg">{{ student.study_state or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Group</label>
                            <p class="text-gray-900 text-lg">{{ student.group_studied or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Medium of Study</label>
                            <p class="text-gray-900 text-lg">{{ student.medium_of_study or 'N/A' }}</p>
                        </div>
                        <div class="md:col-span-4">
                            <label class="text-sm font-semibold text-gray-600">Marks Details</label>
                            <div class="grid grid-cols-3 gap-4 mt-2">
                                <div class="bg-blue-50 p-3 rounded">
                                    <p class="text-xs text-gray-600">Maths</p>
                                    <p class="text-2xl font-bold text-blue-600">{{ academics.maths_marks if academics else 'N/A' }}</p>
                                </div>
                                <div class="bg-green-50 p-3 rounded">
                                    <p class="text-xs text-gray-600">Physics</p>
                                    <p class="text-2xl font-bold text-green-600">{{ academics.physics_marks if academics else 'N/A' }}</p>
                                </div>
                                <div class="bg-orange-50 p-3 rounded">
                                    <p class="text-xs text-gray-600">Chemistry</p>
                                    <p class="text-2xl font-bold text-orange-600">{{ academics.chemistry_marks if academics else 'N/A' }}</p>
                                </div>
                            </div>
                            {% if academics %}
                            <div class="mt-4 grid grid-cols-2 gap-4">
                                <div class="bg-purple-50 p-3 rounded">
                                    <p class="text-xs text-gray-600">Total Marks</p>
                                    <p class="text-2xl font-bold text-purple-600">{{ academics.total_marks if academics.total_marks else (academics.maths_marks|default(0) + academics.physics_marks|default(0) + academics.chemistry_marks|default(0)) }}</p>
                                </div>
                                <div class="bg-indigo-50 p-3 rounded">
                                    <p class="text-xs text-gray-600">Cutoff Score</p>
                                    <p class="text-2xl font-bold text-indigo-600">{{ academics.cutoff if academics.cutoff else 'N/A' }}</p>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </section>

                <!-- Social Details -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Social Details</h3>
                    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Religion</label>
                            <p class="text-gray-900 text-lg">{{ student.religion or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Community</label>
                            <p class="text-gray-900 text-lg">{{ student.community or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Caste</label>
                            <p class="text-gray-900 text-lg">{{ student.caste or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">General Quota</label>
                            <p class="text-gray-900 text-lg">{{ student.general_quota or 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">Category 7.5</label>
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold {% if student.category_7_5 %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ 'Yes' if student.category_7_5 else 'No' }}
                            </span>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600">First Graduate</label>
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold {% if student.first_graduate %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ 'Yes' if student.first_graduate else 'No' }}
                            </span>
                        </div>
                    </div>
                </section>

                <!-- Additional Information -->
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-indigo-200">Additional Information</h3>
                    <div>
                        <label class="text-sm font-semibold text-gray-600">Reference Details</label>
                        <p class="text-gray-900 text-lg">{{ student.reference_details or 'N/A' }}</p>
                    </div>
                </section>

                <!-- Metadata -->
                <section class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-sm font-bold text-gray-800 mb-3">Enquiry Metadata</h3>
                    <div class="grid grid-cols-2 gap-4 md:grid-cols-4 text-sm">
                        <div>
                            <label class="text-xs font-semibold text-gray-600">Created Date</label>
                            <p class="text-gray-900">{{ enquiry.created_at[:10] if enquiry.created_at else 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-600">Created Time</label>
                            <p class="text-gray-900">{{ enquiry.created_at[11:16] if enquiry.created_at else 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-600">Updated Date</label>
                            <p class="text-gray-900">{{ enquiry.updated_at[:10] if enquiry.updated_at else 'N/A' }}</p>
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-600">Status</label>
                            <p class="text-gray-900 font-semibold">{{ enquiry.status|title }}</p>
                        </div>
                    </div>
                </section>

                <!-- Action Buttons -->
                <div class="flex gap-4 mt-8 pt-6 border-t">
                    <a href="{{ url_for('admin.enquiries') }}" class="flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 text-center font-semibold transition-colors">
                        Back to List
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
