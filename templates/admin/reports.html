<!DOCTYPE html>
<html class="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Daily Admission Status Report - EPMC</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#1e40af", // Deep blue for professional academic feel
              "background-light": "#f8fafc",
              "background-dark": "#0f172a",
            },
            fontFamily: {
              display: ["Inter", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.5rem",
            },
          },
        },
      };
      function toggleDarkMode() {
        document.documentElement.classList.toggle('dark');
      }
      function printReport() {
        window.print();
      }
    </script>
<style>
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background-color: white !important;
                color: black !important;
            }
            .report-container {
                box-shadow: none !important;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
                max-width: 100% !important;
            }
            table {
                border-collapse: collapse;
                width: 100%;
            }
            th, td {
                border: 1px solid #000 !important;
            }
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
            font-size: 0.875rem;
        }
        th, td {
            border: 1px solid;
            padding: 8px 4px;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200 transition-colors duration-200">
<nav class="no-print bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-6 py-4 flex justify-between items-center sticky top-0 z-10 shadow-sm">
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-primary text-3xl">school</span>
<div>
<h1 class="text-lg font-bold text-slate-900 dark:text-white leading-tight">Admin Dashboard</h1>
<p class="text-xs text-slate-500 dark:text-slate-400">Admission Control System</p>
</div>
</div>
<div class="flex gap-4">
<button class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" onclick="toggleDarkMode()">
<span class="material-symbols-outlined dark:hidden">dark_mode</span>
<span class="material-symbols-outlined hidden dark:block">light_mode</span>
</button>
<button class="flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 transition-all font-medium text-sm" onclick="printReport()">
<span class="material-symbols-outlined text-sm">print</span> Print Report
            </button>
<button class="flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-all font-medium text-sm">
<span class="material-symbols-outlined text-sm">description</span> Export to Excel
            </button>
</div>
</nav>
<main class="max-w-[1200px] mx-auto p-4 md:p-8">
<div class="report-container bg-white dark:bg-slate-900 p-8 shadow-xl border border-slate-200 dark:border-slate-800 rounded-xl">
<header class="text-center mb-8 border-b-2 border-primary pb-6">
<h2 class="text-2xl md:text-3xl font-extrabold text-primary uppercase tracking-tight">Er. Perumal Manimekalai College of Engineering</h2>
<h3 class="text-xl font-semibold text-slate-700 dark:text-slate-300 mt-2">Daily Admission Status - 2025-2026</h3>
<div class="flex justify-between items-end mt-6">
<div class="text-left">
<span class="bg-primary text-white px-4 py-1 rounded text-sm font-bold uppercase tracking-wider">B.E - First Year</span>
</div>
<div class="text-right">
          <form method="get" class="flex items-center gap-3">
            <label class="text-sm text-slate-500">Report Date</label>
            <input type="date" name="date" value="{{ selected_date_iso or '' }}" class="border px-2 py-1 rounded bg-white text-sm" />
            <button type="submit" class="px-3 py-1 bg-blue-600 text-white rounded text-sm">Load</button>
          </form>
          <p class="text-sm font-semibold text-slate-600 dark:text-slate-400 mt-2">Selected: <span class="text-slate-900 dark:text-white ml-2 border-b border-slate-400">{{ selected_date_display or '' }}</span></p>
</div>
</div>
</header>
    <div class="table-container">
<table class="border-slate-300 dark:border-slate-700">
<thead class="bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 uppercase text-[11px] font-bold">
<tr>
<th class="w-10" rowspan="3">S.No</th>
<th class="w-20" rowspan="3">Dept</th>
<th class="py-2" colspan="2">Actual No of Seats</th>
<th colspan="3">Admitted Upto<br/>{{ selected_date_display or '' }}</th>
<th colspan="3">Total Admitted As On<br/>{{ selected_date_display or '' }}</th>
<th colspan="2">Vacancy</th>
</tr>
<tr>
<th class="w-16">MQ</th>
<th class="w-16">GQ</th>
<th class="w-16">MQ</th>
<th class="w-16">GQ</th>
<th class="w-16">GQ(S)</th>
<th class="w-16">MQ</th>
<th class="w-16">GQ</th>
<th class="w-16">GQ(S)</th>
<th class="w-16">MQ</th>
<th class="w-16">GQ</th>
</tr>
</thead>
<tbody class="divide-y divide-slate-200 dark:divide-slate-800 text-slate-700 dark:text-slate-300">
            {% for d in departments %}
              {% set mq = (d.get('mq') or 0) | int %}
              {% set gq = (d.get('gq') or d.get('seats') or 0) | int %}
              {% set adm_mq_upto = (d.get('adm_mq_upto') or 0) | int %}
              {% set adm_gq_upto = (d.get('adm_gq_upto') or d.get('admitted_count') or 0) | int %}
              {% set adm_gqs_upto = (d.get('adm_gqs_upto') or 0) | int %}
              {% set adm_mq_on = (d.get('adm_mq_on') or 0) | int %}
              {% set adm_gq_on = (d.get('adm_gq_on') or 0) | int %}
              {% set adm_gqs_on = (d.get('adm_gqs_on') or 0) | int %}
                <tr class="hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">
                    <td class="font-medium">{{ loop.index }}</td>
                    <td class="font-bold text-slate-900 dark:text-white text-left px-4">{{ d.dept_code or d.short_name or d.dept_name }}</td>
                    <td>{{ mq }}</td>
                    <td>{{ gq }}</td>
                    {# Admitted Upto (cumulative) #}
                    <td>{{ adm_mq_upto if (adm_mq_upto is defined) else adm_mq }}</td>
                    <td>{{ adm_gq_upto if (adm_gq_upto is defined) else adm_gq }}</td>
                    <td>{{ adm_gqs_upto if (adm_gqs_upto is defined) else adm_gqs }}</td>
                    {# Total Admitted As On (on-date) #}
                    <td class="bg-slate-50 dark:bg-slate-800/50 font-semibold">{{ adm_mq_on if (adm_mq_on is defined) else adm_mq }}</td>
                    <td class="bg-slate-50 dark:bg-slate-800/50 font-semibold">{{ adm_gq_on if (adm_gq_on is defined) else adm_gq }}</td>
                    <td class="bg-slate-50 dark:bg-slate-800/50 font-semibold">{{ adm_gqs_on if (adm_gqs_on is defined) else adm_gqs }}</td>
                    {% set vac_mq = mq - adm_mq_upto %}
                    {% set vac_gq = gq - adm_gq_upto %}
                    <td class="text-red-600 dark:text-red-400 font-medium">{{ vac_mq if vac_mq > 0 else 0 }}</td>
                    <td class="text-red-600 dark:text-red-400 font-medium">{{ vac_gq if vac_gq > 0 else 0 }}</td>
                </tr>
            {% endfor %}
</tbody>
<tfoot class="bg-slate-100 dark:bg-slate-800 font-bold text-slate-900 dark:text-white">
<tr>
            <td class="text-right px-4 py-3 uppercase" colspan="2">Total ({{ totalMqSeats + totalGqSeats }})</td>
            <td>{{ totalMqSeats }}</td>
            <td>{{ totalGqSeats }}</td>
            <td>{{ totalMqAdmUpto }}</td>
            <td>{{ totalGqAdmUpto }}</td>
            <td>{{ totalGqsAdmUpto }}</td>
            <td>{{ totalMqAdmOn }}</td>
            <td>{{ totalGqAdmOn }}</td>
            <td>{{ totalGqsAdmOn }}</td>
            <td class="text-red-600 dark:text-red-400">{{ (totalMqSeats - totalMqAdmUpto) if (totalMqSeats - totalMqAdmUpto) > 0 else 0 }}</td>
            <td class="text-red-600 dark:text-red-400">{{ (totalGqSeats - totalGqAdmUpto) if (totalGqSeats - totalGqAdmUpto) > 0 else 0 }}</td>
</tr>
</tfoot>
</table>
</div>
<div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="space-y-3">
<div class="flex items-center justify-between p-3 border border-slate-200 dark:border-slate-800 rounded-lg">
<span class="text-sm font-medium">MQ - TOTAL ADMITTED ON {{ selected_date_display or '' }}</span>
<span class="text-lg font-bold text-primary">{{ totalMqAdmOn or 0 }}</span>
</div>
<div class="flex items-center justify-between p-3 border border-slate-200 dark:border-slate-800 rounded-lg">
<span class="text-sm font-medium">GQ - TOTAL ADMITTED ON {{ selected_date_display or '' }}</span>
<span class="text-lg font-bold text-primary">{{ totalGqAdmOn or 0 }}</span>
</div>
<div class="flex items-center justify-between p-3 border border-slate-200 dark:border-slate-800 rounded-lg">
<span class="text-sm font-medium">GQ(S) - TOTAL ADMITTED ON {{ selected_date_display or '' }}</span>
<span class="text-lg font-bold text-primary">{{ totalGqsAdmOn or 0 }}</span>
</div>
</div>
<div class="flex flex-col justify-center items-center bg-slate-50 dark:bg-slate-800/50 rounded-lg p-6 border-2 border-dashed border-slate-300 dark:border-slate-700">
<span class="material-symbols-outlined text-4xl text-slate-400 mb-2">calendar_month</span>
<p class="text-slate-500 dark:text-slate-400 uppercase text-xs font-bold tracking-widest mb-1">Status Reference Date</p>
<p class="text-2xl font-black text-slate-900 dark:text-white">{{ selected_date_display or '' }}</p>
</div>
</div>
<div class="mt-12 flex justify-between items-end">
<div class="text-xs text-slate-500 dark:text-slate-400">
<p>Computer Generated Report</p>
<p>Generated on: <span id="current-timestamp"></span></p>
</div>
<div class="text-center w-48 border-t-2 border-slate-300 dark:border-slate-700 pt-2">
<p class="text-xs font-bold uppercase text-slate-700 dark:text-slate-300">Admission Coordinator</p>
</div>
</div>
</div>
</main>
<footer class="no-print mt-12 pb-8 text-center text-slate-500 dark:text-slate-400 text-sm">
<p>Â© 2025 Er. Perumal Manimekalai College of Engineering. All rights reserved.</p>
</footer>
<script>
        document.getElementById('current-timestamp').innerText = new Date().toLocaleString();
    </script>

</body></html>